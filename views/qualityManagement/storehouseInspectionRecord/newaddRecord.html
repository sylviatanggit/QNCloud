<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>添加库房巡检记录</title>
		<link rel="stylesheet" type="text/css" href="../../../css/comboselect.css" />
		<link rel="stylesheet" type="text/css" href="../../../css/demo.css" />
		<link rel="stylesheet" href="../../../plugins/layui/css/layui.css">
		<link href="../../../css/font-awesome.min.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="../../../css/same.css" />
	</head>
	<style type="text/css">
		#addRecord {
			/*width: calc(100vw+17px);*/
			font-size: 9pt;
		}
		
		#addRecord legend {
			font-family: "PingFang" !important;
			font-size: 14px !important;
			color: #2D89DD !important;
			font-weight: 800 !important;
		}
		
		#addRecord label {
			width: 94px !important;
			font-size: 9pt !important;
			color: #232323 !important;
			padding: 0;
		}
		
		#addRecord .layui-input {
			font-size: 9pt !important;
			width: 200px !important;
			height: 28px !important;
		}
		
		.layui-input-block {
			min-height: 28px;
		}
		
		#addRecord select {
			font-size: 9pt !important;
			width: 200px !important;
			height: 28px !important;
		}
		
		#addRecord textarea {
			font-size: 9pt !important;
			width: 200px !important;
			height: 80px;
			border: 1px solid #ddd !important;
		}
		
		#addRecord .layui-form-title {
			width: 100%;
			right: 15px;
			padding-top: 5px;
			margin-bottom: -20px;
			position: fixed;
			z-index: 100;
			background-color: #FFFFFF !important;
			line-height: 32px;
			top: 0px;
		}
		
		#addRecord button {
			margin-left: 8px;
			text-align: center;
			width: 76px;
			height: 28px;
			line-height: 28px;
			float: right;
			font-family: "PingFang" !important;
			font-size: 14px !important;
			color: #FFFFFF !important;
			background-color: #2D89DD !important;
		}
		
		.current {
			background-color: #357BEA;
		}
		
		#addRecord {
			margin-bottom: 120px;
		}
		
		#addRecord .layui-table {
			border: none;
		}
		
		#addRecord .layui-table tr {
			margin-bottom: 15px !important;
			line-height: 28px !important;
		}
		
		#addRecord .layui-table td {
			border: none;
			padding: 0 !important;
			padding-bottom: 15px !important;
			line-height: 28px !important;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(1) {
			text-align: right;
			width: 100px;
		}
		
		#addRecord .layui-table tbody tr td input {
			cursor: pointer;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(2) {
			padding-left: 30px !important;
			width: 60px;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(3) {
			width: 94px;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(4) {
			width: 80px;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(5) {
			width: 50px;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(6) {
			width: 60px;
		}
		
		#addRecord .layui-table tbody tr td:nth-child(7) input {
			line-height: 24px !important;
		}
		
		.layui-table td {
			color: #232323 !important;
			font-size: 9pt !important;
		}
		
		.layui-table tr:nth-child(odd) {
			background-color: #FFFFFF !important;
		}
		
		.layui-table tbody tr:nth-child(even) {
			background-color: #FFFFFF !important;
		}
		
		.layui-table tbody tr:nth-child(odd) {
			background-color: #FFFFFF !important;
		}
	</style>

	<body>
		<div id="addRecord">
			<div class="layui-form-item layui-form-title">
				<button class="layui-btn addRecord_submit">提交</button>
			</div>
			<fieldset class="layui-elem-field layui-field-title" style="margin-top: 40px;">
				<legend>库房信息</legend>
			</fieldset>
			<div class="layui-form-item">
				<label class="layui-form-label">库房名称</label>
				<div class="layui-input-block">
					<input autocomplete="off" required="required" id="warehouse" class="layui-input warehouse" type="text" style="width: 400px !important;">

				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">遮光</label>
				<div class="layui-input-block">
					<input autocomplete="off" required="required" class="layui-input addRecord_zheguang shading" type="text" style="width: 400px !important;">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">通风</label>
				<div class="layui-input-block">
					<input autocomplete="off" required="required" class="layui-input addRecord_tongfeng ventilate" type="text" style="width: 400px !important;">
				</div>
			</div>
			<table class="layui-table">
				<!--<colgroup>
					<col width="100">
					<col width="100">
					<col width="100">
					<col width="100">
				</colgroup>-->
				<tbody>
					<tr>
						<td>状态标记</td>
						<td><input type="radio" name="state" checked="checked" value="1" />有</td>
						<td><input type="radio" name="state" value="0"/>无</td>
						<td><input type="radio" name="state" value="2"/>正确</td>
						<td></td>
						<td></td>
						<td>处理措施</td>
					</tr>
					<tr>
						<td>商品分类与存放</td>
						<td><input type="radio" name="cunfang" checked="checked" value="0"/>分区</td>
						<td><input type="radio" name="cunfang" value="1"/>正确</td>
						<td><input type="radio" name="cunfang" value="2"/>错误</td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="cunfang" /></td>
					</tr>
					<tr>
						<td>物料码放</td>
						<td><input type="radio" name="mafang" checked="checked" value="0"/>整齐</td>
						<td><input type="radio" name="mafang" value="1"/>分品种</td>
						<td><input type="radio" name="mafang" value="2"/>分批</td>
						<td><input type="radio" name="mafang" value="3"/>分区</td>
						<td></td>
						<td><input type="text" name="" class="mafang" /></td>
					</tr>
					<tr>
						<td>垛距</td>
						<td><input type="radio" name="duoju" checked="checked" value="0"/>符合</td>
						<td><input type="radio" name="duoju" value="1"/>不符合</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="duoju" /></td>
					</tr>
					<tr>
						<td>帐物</td>
						<td><input type="radio" name="zhangwu" checked="checked" value="0"/>相符</td>
						<td><input type="radio" name="zhangwu" value="0"/>不相符</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="zhangwu"  /></td>
					</tr>
					<tr>
						<td>药品包装</td>
						<td><input type="radio" name="baozhuang" checked="checked" value="0"/>完好</td>
						<td><input type="radio" name="baozhuang" value="1"/>破损</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="baozhuang" /></td>
					</tr>
					<tr>
						<td>药品外观</td>
						<td><input type="radio" name="waiguan" checked="checked" value="0"/>潮湿</td>
						<td><input type="radio" name="waiguan" value="1"/>发霉</td>
						<td><input type="radio" name="waiguan" value="2"/>虫蛀、鼠药</td>
						<td><input type="radio" name="waiguan" value="3"/>积热</td>
						<td><input type="radio" name="waiguan" value="4"/>无异常</td>
						<td><input type="text" name="" class="waiguan"/></td>
					</tr>
					<tr>
						<td>设施</td>
						<td><input type="radio" name="sheshi" checked="checked" value="0"/>齐全</td>
						<td><input type="radio" name="sheshi" value="1"/>不齐全</td>
						<td><input type="radio" name="sheshi" value="2"/>完好</td>
						<td><input type="radio" name="sheshi" value="3"/>不完好</td>
						<td></td>
						<td><input type="text" name="" class="sheshi" /></td>
					</tr>
					<tr>
						<td>门、窗、销</td>
						<td><input type="radio" name="xiao" checked="checked" value="0"/>完好</td>
						<td><input type="radio" name="xiao" value="1"/>有安全隐患</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="xiao"  /></td>
					</tr>
					<tr>
						<td>消防器材</td>
						<td><input type="radio" name="qicai" checked="checked" value="0"/>完好</td>
						<td><input type="radio" name="qicai" value="1"/>不能正常使用</td>
						<td><input type="radio" name="qicai" value="2"/>在规定位置</td>
						<td><input type="radio" name="qicai" value="3"/>被挪用</td>
						<td></td>
						<td><input type="text" name="" class="qicai" /></td>
					</tr>
					<tr>
						<td>电源线</td>
						<td><input type="radio" name="dianyuanxian" checked="checked" value="0"/>完好</td>
						<td><input type="radio" name="dianyuanxian" value="1"/>有裸露、破损</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="dianyuanxian" /></td>
					</tr>
					<tr>
						<td>清洁卫生</td>
						<td><input type="radio" name="weisheng" checked="checked" value="0"/>整洁</td>
						<td><input type="radio" name="weisheng" value="1"/>不整洁</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input type="text" name="" class="weisheng" /></td>
					</tr>
				</tbody>
			</table>
			<div class="layui-form-item">
				<label class="layui-form-label">养护员</label>
				<div class="layui-input-block">
					<input autocomplete="off" required="required" id="salesman" class="layui-input addRecord_yanghuyuan" type="text" style="width: 400px !important;">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">检查日期</label>
				<div class="layui-input-block">
					<input autocomplete="off" required="required" id="checkDate" class="layui-input addRecord_date" type="text" style="width: 400px !important;">
				</div>
			</div>
		</div>
	</body>
	<script src="../../../plugins/layui/layui.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		layui.use(['jquery', 'layer', "laydate"], function() {
			var $ = layui.$, //重点处
				layer = layui.layer;
			var laydate = layui.laydate;
			laydate.render({
				elem: '#checkDate',
				value: new Date()
			});

			function stockList() {
				$.ajax({
					type: "get",
					url: localStorage.serIp+"/WebGetWarehouseDropDownList?jsoncallback=?",
					async: true,
					dataType: 'jsonp',
					data: {
						"userId": localStorage.userId,
						"userPw": localStorage.userPw,
						'database': localStorage.database,
						'groupCompanyId': localStorage.groupcompanyid
					},
					success: function(res) {
						var data = JSON.parse(res);
						//							console.log(data)
						$('#warehouse').bComboSelect({
							showField: 'warehousename',
							keyField: 'id',
							data: data
						});
					}
				});
			}
			stockList()

			function staffList() {
				$.ajax({
					type: "get",
					url: localStorage.serIp+"/WebGetEmployeeDropDownList?jsoncallback=?",
					async: true,
					dataType: 'jsonp',
					data: {
						"userId": localStorage.userId,
						"userPw": localStorage.userPw,
						'database': localStorage.database,
						'groupCompanyId': localStorage.groupcompanyid
					},
					success: function(res) {
						var data = JSON.parse(res);
						//							console.log(data)
						$('#salesman').bComboSelect({
							showField: 'employeename',
							keyField: 'employeesid',
							data: data
						});
					}
				});
			}
			staffList()
			$(".addRecord_submit").click(function() {
				//弹出层转圈圈的那个
				parent.layer.open({
				  type: 3, 
				  zIndex: parent.layer.zIndex, //重点1
				  success: function(layero, index){
				  		jiazaiIndex = index;
						}
				});
				var shading = $(".shading").val();
				var ventilate = $('.ventilate').val();
				var warehouseid = $('#warehouse').val();
				var checkdate = $(".addRecord_date").val();
				var statemark = $("input[name='state']:checked").val();
				var goodsclassify = $("input[name='cunfang']:checked").val();
				var stackingmaterial = $("input[name='mafang']:checked").val();
				var stackdistance = $("input[name='duoju']:checked").val();
				var zhangwu = $("input[name='zhangwu']:checked").val();
				var medicinalpackage = $("input[name='baozhuang']:checked").val();
				var medicinalexterior = $("input[name='waiguan']:checked").val();
				var facilities = $("input[name='sheshi']:checked").val();
				var door = $("input[name='xiao']:checked").val();
				var firefightingequipment = $("input[name='qicai']:checked").val();
				var powerline = $("input[name='dianyuanxian']:checked").val();
				var sanitation = $("input[name='weisheng']:checked").val();
				var maintenancer = $("#salesman").val();
				var goodsclassifynomo = $(".cunfang").val();
				var stackingmaterialnomo = $(".mafang").val();
				var stackdistancenomo = $(".duoju").val();
				var zhangwunomo = $(".zhangwu").val();
				var medicinalpackagenomo = $(".baozhuang").val();
				var medicinalexteriornomo = $(".waiguan").val();
				var facilitiesnomo = $(".sheshi").val();
				var doornomo = $(".xiao").val();
				var firefightingequipmentnomo = $(".qicai").val();
				var powerlinenomo = $(".dianyuanxian").val();
				var sanitationnomo = $(".weisheng").val();
				var master = {
					'shading': shading,
					'ventilate': ventilate,
					'warehouseid': warehouseid,
					'checkdate': checkdate,
					'statemark': statemark,
					'goodsclassify': goodsclassify,
					'goodsclassifynomo': goodsclassifynomo,
					'stackingmaterial':stackingmaterial,
					'stackingmaterialnomo': stackingmaterialnomo,
					'stackdistance': stackdistance,
					'stackdistancenomo': stackdistancenomo,
					'zhangwu': zhangwu,
					'zhangwunomo': zhangwunomo,
					'medicinalpackage': medicinalpackage,
					'medicinalpackagenomo': medicinalpackagenomo,
					'medicinalexterior': medicinalexterior,
					'medicinalexteriornomo': medicinalexteriornomo,
					'facilities': facilities,
					'facilitiesnomo': facilitiesnomo,
					'door': door,
					'doornomo': doornomo,
					'firefightingequipment': firefightingequipment,
					'firefightingequipmentnomo': firefightingequipmentnomo,
					'powerline': powerline,
					'powerlinenomo': powerlinenomo,
					'sanitation': sanitation,
					'sanitationnomo': sanitationnomo,
					'maintenancer': maintenancer,
				};
				if($(".warehouse").val() == '') {
					parent.layer.open({
						title: "提示",
						zIndex: parent.layer.zIndex, //重点1
						content: '请填写库房名称'
					});
					parent.layer.close(jiazaiIndex);
					return false;
				} else if($(".addRecord_yanghuyuan").val() == '') {
					parent.layer.open({
						title: "提示",
						zIndex: parent.layer.zIndex, //重点1
						content: '请填写养护员'
					});
					parent.layer.close(jiazaiIndex);
					return false;
				}
				$.ajax({
					type: "get",
					url: localStorage.serIp+"/WebAddWarehouseCheckRecord?jsoncallback=?",
					async: true,
					dataType: 'jsonp',
					data: {
						"userId": localStorage.userId,
						"userPw": localStorage.userPw,
						'database': localStorage.database,
						'groupCompanyId': localStorage.groupcompanyid,
						'master': JSON.stringify(master)
					},
					success: function(res) {
						parent.layer.close(jiazaiIndex);
						var data = JSON.parse(res);
						if(data.ResultValue == 1) {
							parent.layer.open({
								title: "提示",
								content: '提交成功',
								zIndex: parent.layer.zIndex, //重点1
								success: function(layero) {
									parent.layer.setTop(layero); //重点2
								},
								end: function(){  
									var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
									parent.layer.close(index); //再执行关闭     
								}
							});
						} else {
							parent.layer.open({
								title: "提示",
								zIndex: parent.layer.zIndex, //重点1
								content: '提交失败'
							});
						}
					}
				});

			})
		});
	</script>
	<script src="../../../js/jquery.js" type="text/javascript"></script>
	<script type="text/javascript" src="../../../js/comboselect.js"></script>
	<script type="text/javascript" src="../../../js/b.comboselect.js"></script>

</html>